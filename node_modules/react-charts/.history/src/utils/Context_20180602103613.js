import React from 'react'

const Context = React.createContext({})

export default Context

export const Connect = subscribe => {
  const subscriber = typeof subscribe({}) === 'function' ? subscribe() : subscribe

  return Comp => {

    class Connected extends React.Component {
      render () {
        return (
          <Context.Consumer>
            {({ dispatch, ...rest }) => (
              <Comp {...subscriber(rest, props)} {...props} dispatch={dispatch} />
            )}
          </Context.Consumer>
        )
      }
      hoistNonReactStatics(Connected, Comp)
      return Connected
    }
    }


  return Connected
}
