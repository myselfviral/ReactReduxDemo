import React from 'react'

const Context = React.createContext({})

export default Context

export const Connect = subscribe => {
  const subscriber = typeof subscribe({}) === 'function' ? subscribe() : subscribe

  return Comp => props => (
    <Context.Consumer>
      {({ dispatch, ...rest }) => <Comp {...subscriber(rest)} {...props} dispatch={dispatch} />}
    </Context.Consumer>
  )
}
